/**
 * angular-strap
 * @version v2.3.2 - 2015-09-22
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes <olivier@mg-crea.com> (https://github.com/mgcrea)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
'use strict';angular.module('mgcrea.ngStrap.select',['mgcrea.ngStrap.tooltip','mgcrea.ngStrap.helpers.parseOptions']).provider('$select',function(){var e=this.defaults={animation:'am-fade',prefixClass:'select',prefixEvent:'$select',placement:'bottom-left',templateUrl:'select/select.tpl.html',trigger:'focus',container:!1,keyboard:!0,html:!1,delay:0,multiple:!1,allNoneButtons:!1,sort:!0,caretHtml:'&nbsp;<span class="caret"></span>',placeholder:'Choose among the following...',allText:'All',noneText:'None',maxLength:3,maxLengthHtml:'selected',iconCheckmark:'glyphicon glyphicon-ok'};this.$get=['$window','$document','$rootScope','$tooltip','$timeout',function(t,n,a,l,i){function o(a,o,c){var u={},s=angular.extend({},e,c);u=l(a,s);var $=u.$scope;$.$matches=[],s.multiple?$.$activeIndex=[]:$.$activeIndex=-1,$.$isMultiple=s.multiple,$.$showAllNoneButtons=s.allNoneButtons&&s.multiple,$.$iconCheckmark=s.iconCheckmark,$.$allText=s.allText,$.$noneText=s.noneText,$.$activate=function(e){$.$$postDigest(function(){u.activate(e)})},$.$select=function(e,t){$.$$postDigest(function(){u.select(e)})},$.$isVisible=function(){return u.$isVisible()},$.$isActive=function(e){return u.$isActive(e)},$.$selectAll=function(){for(var e=0;e<$.$matches.length;e++)$.$isActive(e)||$.$select(e)},$.$selectNone=function(){for(var e=0;e<$.$matches.length;e++)$.$isActive(e)&&$.$select(e)},$.$selectAllAtOnce=function(){if(s.multiple){for(var e=[],t=0;t<$.$matches.length;t++)e.push(t);$.$activeIndex=e,o.$setViewValue($.$activeIndex.map(function(e){return angular.isUndefined($.$matches[e])?null:$.$matches[e].value}))}else $.$selectAll()},$.$selectNoneAtOnce=function(){s.multiple?($.$activeIndex=[],o.$setViewValue([])):$.$selectNone()},u.update=function(e){$.$matches=e,u.$updateActiveIndex()},u.activate=function(e){return s.multiple?(u.$isActive(e)?$.$activeIndex.splice($.$activeIndex.indexOf(e),1):$.$activeIndex.push(e),s.sort&&$.$activeIndex.sort(function(e,t){return e-t})):$.$activeIndex=e,$.$activeIndex},u.select=function(e){var t=$.$matches[e].value;$.$apply(function(){u.activate(e),s.multiple?o.$setViewValue($.$activeIndex.map(function(e){return angular.isUndefined($.$matches[e])?null:$.$matches[e].value})):(o.$setViewValue(t),u.hide())}),$.$emit(s.prefixEvent+'.select',t,e,u)},u.$updateActiveIndex=function(){o.$modelValue&&$.$matches.length?s.multiple&&angular.isArray(o.$modelValue)?$.$activeIndex=o.$modelValue.map(function(e){return u.$getIndex(e)}):$.$activeIndex=u.$getIndex(o.$modelValue):$.$activeIndex>=$.$matches.length?$.$activeIndex=s.multiple?[]:0:o.$modelValue||s.multiple||($.$activeIndex=-1)},u.$isVisible=function(){return s.minLength&&o?$.$matches.length&&o.$viewValue.length>=s.minLength:$.$matches.length},u.$isActive=function(e){return s.multiple?-1!==$.$activeIndex.indexOf(e):$.$activeIndex===e},u.$getIndex=function(e){var t=$.$matches.length,n=t;if(t){for(n=t;n--&&$.$matches[n].value!==e;);if(!(0>n))return n}},u.$onMouseDown=function(e){if(e.preventDefault(),e.stopPropagation(),r){var t=angular.element(e.target);t.triggerHandler('click')}},u.$onKeyDown=function(e){return/(9|13|38|40)/.test(e.keyCode)?(9!==e.keyCode&&(e.preventDefault(),e.stopPropagation()),s.multiple&&9===e.keyCode?u.hide():s.multiple||13!==e.keyCode&&9!==e.keyCode?void(s.multiple||(38===e.keyCode&&$.$activeIndex>0?$.$activeIndex--:38===e.keyCode&&$.$activeIndex<0?$.$activeIndex=$.$matches.length-1:40===e.keyCode&&$.$activeIndex<$.$matches.length-1?$.$activeIndex++:angular.isUndefined($.$activeIndex)&&($.$activeIndex=0),$.$digest())):u.select($.$activeIndex)):void 0},u.$isIE=function(){var e=t.navigator.userAgent;return e.indexOf('MSIE ')>0||e.indexOf('Trident/')>0||e.indexOf('Edge/')>0},u.$selectScrollFix=function(e){'UL'===n[0].activeElement.tagName&&(e.preventDefault(),e.stopImmediatePropagation(),e.target.focus())};var d=u.show;u.show=function(){d(),s.multiple&&u.$element.addClass('select-multiple'),i(function(){u.$element.on(r?'touchstart':'mousedown',u.$onMouseDown),s.keyboard&&a.on('keydown',u.$onKeyDown)},0,!1)};var m=u.hide;return u.hide=function(){s.multiple||o.$modelValue||($.$activeIndex=-1),u.$element.off(r?'touchstart':'mousedown',u.$onMouseDown),s.keyboard&&a.off('keydown',u.$onKeyDown),m(!0)},u}var c=(angular.element(t.document.body),/(ip(a|o)d|iphone|android)/gi.test(t.navigator.userAgent)),r='createTouch'in t.document&&c;return o.defaults=e,o}]}).directive('bsSelect',['$window','$parse','$q','$select','$parseOptions',function(e,t,n,a,l){var i=a.defaults;return{restrict:'EAC',require:'ngModel',link:function(e,t,n,o){var c={scope:e,placeholder:i.placeholder};angular.forEach(['template','templateUrl','controller','controllerAs','placement','container','delay','trigger','keyboard','html','animation','placeholder','allNoneButtons','maxLength','maxLengthHtml','allText','noneText','iconCheckmark','autoClose','id','sort','caretHtml','prefixClass','prefixEvent'],function(e){angular.isDefined(n[e])&&(c[e]=n[e])});var r=/^(false|0|)$/i;angular.forEach(['html','container','allNoneButtons','sort'],function(e){angular.isDefined(n[e])&&r.test(n[e])&&(c[e]=!1)});var u=t.attr('data-multiple');if(angular.isDefined(u)&&(r.test(u)?c.multiple=!1:c.multiple=u),'select'===t[0].nodeName.toLowerCase()){var s=t;s.css('display','none'),t=angular.element('<button type="button" class="btn btn-default"></button>'),s.after(t)}var $=l(n.bsOptions),d=a(t,o,c);d.$isIE()&&t[0].addEventListener('blur',d.$selectScrollFix);var m=$.$match[7].replace(/\|.+/,'').trim();e.$watchCollection(m,function(t,n){$.valuesFn(e,o).then(function(e){d.update(e),o.$render()})}),e.$watch(n.ngModel,function(e,t){d.$updateActiveIndex(),o.$render()},!0),o.$render=function(){var e,n;c.multiple&&angular.isArray(o.$modelValue)?(e=o.$modelValue.map(function(e){return n=d.$getIndex(e),angular.isDefined(n)?d.$scope.$matches[n].label:!1}).filter(angular.isDefined),e=e.length>(c.maxLength||i.maxLength)?e.length+' '+(c.maxLengthHtml||i.maxLengthHtml):e.join(', ')):(n=d.$getIndex(o.$modelValue),e=angular.isDefined(n)?d.$scope.$matches[n].label:!1),t.html((e?e:c.placeholder)+(c.caretHtml?c.caretHtml:i.caretHtml))},c.multiple&&(o.$isEmpty=function(e){return!e||0===e.length}),e.$on('$destroy',function(){d&&d.destroy(),c=null,d=null})}}}]);
//# sourceMappingURL=../modules/select.min.js.map